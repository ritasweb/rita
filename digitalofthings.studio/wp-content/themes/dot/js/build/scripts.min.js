var bodyScrollBar,menuScrollBar,headerInfoAnimation,isTouchScreen=!1,isMobile=!0,menuPosition=!0,cachHome=!1,scrollCache=0;const header=document.querySelector(".headerWrapper");var headerHeight=header.offsetHeight;gsap.registerPlugin(ScrollTrigger),gsap.registerPlugin(DrawSVGPlugin),gsap.registerPlugin(SplitText),900<jQuery(window).width()&&(isMobile=!1);var bufferAnimations=new Array,tweenTime=.6,tweenDelay=.02,slideUpDownTime=1500,checkMobile=function(){var e="ontouchstart"in document.documentElement;isTouchScreen=e},mdamping=.08;function refreshScrolls(){isMobile?jQuery("#viewport").stop().animate({scrollTop:0},300,"swing",function(){}):bodyScrollBar.scrollTo(0,0,300),setTimeout(function(){ScrollTrigger.refresh(!0)},310)}function debounce(t){var o;return function(e){o&&clearTimeout(o),o=setTimeout(t,50,e)}}function updatePos(){if(0==bodyScrollBar.scrollTop){const e=document.querySelectorAll(".projectSection .projectWrapper .title");e.forEach(e=>{gsap.isTweening(e)||gsap.to(e,{ease:Power1.easeIn,duration:.2,yPercent:0,onComplete:function(){layoutParallax()}})})}}function getScroll(){isMobile?(ScrollTrigger.defaults({scroller:"#viewport"}),document.querySelector("#viewport").addEventListener("scroll",function(){if(document.querySelector("#viewport").scrollTop<2){const e=document.querySelectorAll(".projectSection .projectWrapper .title");e.forEach(e=>{gsap.isTweening(e)||gsap.to(e,{ease:Power1.easeIn,duration:.2,yPercent:0,onComplete:function(){layoutParallax()}})})}})):(Scrollbar.has(document.querySelector("#viewport"))&&Scrollbar.destroy(document.querySelector("#viewport")),(bodyScrollBar=Scrollbar.init(document.querySelector("#viewport"),{damping:mdamping,delegateTo:document})).track.xAxis.element.remove(),ScrollTrigger.scrollerProxy(document.body,{scrollTop(e){return arguments.length&&(bodyScrollBar.scrollTop=e),bodyScrollBar.scrollTop}}),bodyScrollBar.addListener(ScrollTrigger.update),Scrollbar.has(document.querySelector(".menuScrollBox"))&&Scrollbar.destroy(document.querySelector(".menuScrollBox")),(menuScrollBar=Scrollbar.init(document.querySelector(".menuScrollBox"),{damping:mdamping})).track.xAxis.element.remove(),bodyScrollBar.addListener(updatePos))}function MarqueeMenuObserver(){document.querySelectorAll(".title").forEach(e=>{const t=jQuery(e);var o,r,n,a,i,s=t.closest(".projectWrapper").find(".innerTitle").outerWidth(),c=t.closest(".projectWrapper").find(".title").outerWidth();$(e.querySelector(".i")).wrapAll('<span class="ticker-items">'),c<s&&(t.find(".i").eq(0).clone().appendTo(t.find(".ticker-items")),t.find(".i").eq(0).clone().appendTo(t.find(".ticker-items")),t.find(".i").eq(0).clone().appendTo(t.find(".ticker-items")),t.find(".i").eq(0).clone().appendTo(t.find(".ticker-items")),t.find(".i").eq(0).clone().appendTo(t.find(".ticker-items")),t.find(".i").wrapAll('<span class="ticker-wrapper">'),e=t.find(".ticker-wrapper").outerWidth(),c=t.find(".ticker-wrapper"),s=t.find("div.i").outerWidth(),n=gsap.timeline({repeat:-1}),s=(a=e-s)/35*(Math.random()+.3),i=!1,n.to(c,0,{x:0,ease:"none"}),n.to(c,s,{x:-a,ease:"none",onUpdate:function(){}}),new Draggable(c,{type:"x",throwProps:!0,onPressInit:function(){n.pause()},onDrag:function(){o=(this.x+a)%a,r=(r=-o/a)<0||1===r?1+r%1:0+r%1,n.progress(r),i=!0},onThrowUpdate:function(){o=(this.x+a)%a,r=(r=-o/a)<0||1===r?1+r%1:0+r%1,n.progress(r)},onThrowComplete:function(){n.play(),gsap.fromTo(n,1,{timeScale:0},{timeScale:1,ease:"none"}),i=i&&!1},onRelease:function(){i||(n.play(),gsap.fromTo(n,1,{timeScale:0},{timeScale:1,ease:"none"}))}}))})}function initMarquee(){jQuery(".contentStudio h1").marquee({duplicated:!0,startVisible:!0,gap:5,duration:45e3})}function hypen(){setTimeout(function(){jQuery("p").hyphenate("en-us")},100)}function headerAnimation(){}function layoutParallax(){(headerInfoAnimation=gsap.timeline()).to(".infoStudioProject span *",{ease:Power1.easeInOut,yPercent:-100,duration:.1,scrollTrigger:{anticipatePin:1,start:"20px top",toggleActions:"play none reverse none"}});const e=document.querySelectorAll(".projectSection .projectWrapper .title");e.forEach(e=>{gsap.to(e,{ease:Power1.easeIn,duration:.2,yPercent:-100,scrollTrigger:{anticipatePin:1,start:"20px top",toggleActions:"play none none none"}})})}function positionMenu(n,a){const e=document.querySelectorAll(".projectSection .projectWrapper");var i=!0,s=gsap.timeline(),c=0==a?0:1;e.forEach(e=>{var t,o,r;e.dataset.position!=n?(r=e.querySelector(".openCloseButton .plus"),e.querySelector(".openCloseButton .close"),o=e.querySelector(".animatedLine"),s.to(o,{duration:a+.4*c,xPercent:0,ease:Power1.easeInOut},"<"),s.to(r,{duration:0,opacity:1,ease:Power1.easeInOut},"<"),i?s.to(e,{duration:a,yPercent:0,ease:Power1.easeInOut,onComplete:function(){gsap.to(e,{duration:a+.1*c,opacity:1})}},"<"):s.to(e,{duration:a+.4*c,yPercent:1e3,ease:Power1.easeInOut,onComplete:function(){gsap.to(e,{duration:.1,opacity:1})}},"<")):(i=!1,t=e.querySelector(".openCloseButton .plus"),o=e.querySelector(".openCloseButton .close"),r=e.querySelector(".animatedLine"),s.to(r,{duration:a+.4*c,xPercent:-100,ease:Power1.easeInOut},"<"),s.to(t,{duration:0,opacity:0,ease:Power1.easeInOut},"<"),s.to(o,{duration:0,opacity:0,ease:Power1.easeInOut},"<"),s.to(e,{duration:a,yPercent:0,ease:Power1.easeInOut},"<"),setTimeout(function(){jQuery("header .projectInfo span").html(e.getAttribute("title"))},"200"),Plyr.setup(".player",{fullscreen:{enabled:!1}}))})}function hideMainMenu(e){jQuery(".projectSection").addClass("opened"),positionMenu(e,.8),headerInfoAnimation.play()}function showMainMenu(){const e=document.querySelectorAll(".projectSection .projectWrapper");var o=gsap.timeline();jQuery(".projectSection").removeClass("opened"),e.forEach(e=>{gsap.to(e,{opacity:1,duration:.8,yPercent:0,ease:Power1.easeInOut});var t=e.querySelector(".animatedLine");o.to(t,{duration:.8,xPercent:0,ease:Power1.easeInOut},"<");t=e.querySelector(".openCloseButton .plus");o.to(t,{duration:0,opacity:1,ease:Power1.easeInOut},"<");t=e.querySelector(".openCloseButton .close");o.to(t,{duration:0,opacity:0,ease:Power1.easeInOut},"<"),gsap.to(e.querySelector(".title"),{duration:.2,yPercent:0})}),jQuery("header .projectInfo span").html(""),gsap.to(".infoStudioProject span *",{ease:Power1.easeInOut,yPercent:0,stagger:.04,duration:.1}),headerInfoAnimation.pause(),gsap.to(".projectSection",{stagger:.04,duration:1,y:0})}function setXMenuPosition(e,t){gsap.to(".projectSection .projectWrapper",{ease:Power2.easeInOut,stagger:.05,duration:t,xPercent:e})}function cleanLinks(){function e(e){e.currentTarget.href===window.location.href&&(e.preventDefault(),e.stopPropagation())}for(var t=document.querySelectorAll("a[href]"),o=0;o<t.length;o++)t[o].addEventListener("click",e)}isMobile&&(mdamping=.2),$(window).focus(function(){var e;refreshScrolls(),menuPosition||(positionMenu(menuPosition,0),gsap.set(".projectSection",{y:0}),e=jQuery(".projectWrapper[data-position='"+menuPosition+"']").last().offset(),headerHeight=header.offsetHeight,e=-e.top+headerHeight,gsap.set(".projectSection",{y:e}))}),jQuery(function(e){function r(){checkMobile(),hypen(),isMobile?jQuery("#viewport").stop().animate({scrollTop:0},800,"swing",function(){}):bodyScrollBar.scrollTo(0,0,800)}function n(){const e=Plyr.setup(".player",{fullscreen:{enabled:!1}});for(const o in e)e[o].play();var t=0;setTimeout(function(){gsap.utils.toArray('[data-animation="scroll-default"] .column').forEach(e=>{gsap.fromTo(e,{opacity:0,yPercent:10},{opacity:1,yPercent:0,ease:Power1.easeOut,delay:t<4?.2*t:0,duration:.4,scrollTrigger:{trigger:e,start:"top 90%",toggleActions:"play none none reverse"}}),t++})},1e3),layoutParallax()}var t=gsap.timeline();gsap.set,gsap.set(".headerWrapper .logo",{opacity:1}),gsap.set(".headerWrapper .info",{opacity:1}),gsap.set(".headerWrapper .mainMenu",{opacity:1}),t.from(".logo a span",tweenTime,{y:"101%"}),t.from(".info a > span",tweenTime,{y:"101%"}),t.from(".mainMenu a span",tweenTime,{y:"101%",stagger:.25});var o=gsap.timeline(),a=gsap.timeline(),t=gsap.timeline();if(gsap.set(".innerTitle",{yPercent:100}),gsap.set(".animatedLine .line",{xPercent:-100}),gsap.set(".openCloseButton .plus",{xPercent:300}),t.to(".openCloseButton .plus",{xPercent:0,delay:.2,stagger:.3,ease:Power1.easeInOut,duration:.8}),a.to(".animatedLine .line",{xPercent:0,stagger:.3,ease:Power1.easeInOut,duration:.8}),o.to(".innerTitle",{yPercent:0,stagger:.3,ease:Power1.easeInOut,duration:.8}),barba.hooks.before(e=>{}),barba.use(barbaPrefetch),barba.init({cacheIgnore:!1,preventRunning:!0,timeout:1e4,transitions:[{name:"home",sync:!0,to:{namespace:["home"]},once(){document.querySelector("#viewport").classList.remove("active"),document.querySelector(".menuScrollBox").classList.add("active"),gsap.to(".projectSection",{opacity:1,stagger:.3,ease:Power1.easeInOut,duration:.1}),showMainMenu()},before(){document.querySelector("#viewport").classList.remove("p-events"),document.querySelector(".projectSection  .project").style.backgroundColor="white",showMainMenu()},leave(e){const t=this.async();document.querySelector("#viewport").classList.remove("active"),document.querySelector(".menuScrollBox").classList.add("active"),document.querySelector(".headerDivWrapper").classList.remove("studio"),gsap.to(".projectSection",{opacity:1,stagger:.3,ease:Power1.easeInOut,duration:.1}),isMobile?jQuery("#viewport").stop().animate({scrollTop:0},800,"swing",function(){}):bodyScrollBar.scrollTo(0,0,800),setTimeout(function(){t()},1600)},enter(e){menuPosition=!0,setTimeout(function(){gsap.set(".projectSection  .project",{backgroundColor:"white"}),showMainMenu()},800),document.querySelector("main").classList.contains("contentStudio")?gsap.to(".contentStudio",{opacity:0,stagger:.3,ease:Power1.easeInOut,duration:.1,onComplete:function(){setXMenuPosition(0,.8)}}):setXMenuPosition(0,0)}},{name:"studio",to:{namespace:["studio"]},once({next:e}){document.querySelector("#viewport").classList.add("active"),document.querySelector(".menuScrollBox").classList.remove("active"),gsap.to("#viewport",{opacity:1,stagger:.3,ease:Power1.easeInOut,duration:.1}),setXMenuPosition(-100,.8),showMainMenu(),gsap.from(e.container,{opacity:1,ease:Power1.easeInOut,duration:.2,onComplete:function(){n()}}),document.querySelector(".headerDivWrapper").classList.add("studio"),initMarquee(),hypen()},before({}){document.querySelector("#viewport").classList.remove("p-events"),document.querySelector("#viewport").classList.add("active"),document.querySelector(".menuScrollBox").classList.remove("active"),gsap.to("#viewport",{opacity:1,stagger:.3,ease:Power1.easeInOut,duration:.1}),showMainMenu(),setXMenuPosition(-100,.8)},enter({next:e}){gsap.from(e.container,{opacity:1,ease:Power1.easeInOut,duration:.2,onComplete:function(){}}),document.querySelector(".headerDivWrapper").classList.add("studio"),n(),initMarquee(),hypen()}},{name:"project",to:{namespace:["project"]},once(e){document.querySelector("#viewport").classList.add("active"),document.querySelector(".menuScrollBox").classList.remove("active"),gsap.to("#viewport",{opacity:1,stagger:.3,ease:Power1.easeInOut,duration:.1}),positionMenu(menuPosition=e.next.container.dataset.position,0),gsap.set(".projectSection",{y:0});e=jQuery(".projectWrapper[data-position='"+menuPosition+"']").last().offset();headerHeight=header.offsetHeight;e=-e.top+headerHeight;gsap.to(".projectSection",{ease:Power1.easeInOut,stagger:.04,duration:0,y:e,opacity:1});const t=document.querySelectorAll(".projectSection .projectWrapper .title");t.forEach(e=>{gsap.to(e,{ease:Power1.easeIn,stagger:.04,duration:.2,yPercent:0})}),r(),n()}},{name:"project-project",from:{namespace:["project"]},to:{namespace:["project"]},leave({current:e}){const t=this.async();gsap.set(".projectSection",{autoAlpha:0}),gsap.to(".bottomSection",{yPercent:100,ease:Power1.easeInOut,duration:.3,onComplete:function(){gsap.to(e.container,{autoAlpha:0,stagger:.3,ease:Power1.easeInOut,duration:.3,onComplete:function(){t(),checkMobile(),hypen(),isMobile?document.querySelector("#viewport").scrollTop=0:bodyScrollBar.scrollTo(0,0,0)}})}})},enter({next:e}){positionMenu(menuPosition=e.container.dataset.position,0),gsap.set(".projectSection",{y:0});var t=jQuery(".projectWrapper[data-position='"+menuPosition+"']").last().offset();headerHeight=header.offsetHeight;var o=-t.top+headerHeight;document.querySelector("#viewport").classList.remove("p-events"),setTimeout(function(){gsap.set(".projectSection",{y:o}),gsap.set(".projectSection",{autoAlpha:1})},100);const r=document.querySelectorAll(".projectSection .projectWrapper .titleLink");r.forEach(e=>{gsap.set(e,{yPercent:100}),gsap.to(e,{ease:Power1.easeInOut,stagger:.04,duration:.8,yPercent:0,delay:.2})}),gsap.from(e.container,{opacity:0,stagger:.3,ease:Power1.easeInOut,duration:.2,onComplete:function(){n()}})}},{name:"home-project",from:{namespace:["home"]},to:{namespace:["project"]},before(e){const t=document.querySelectorAll(".projectWrapper");document.querySelector("#viewport").classList.add("active"),document.querySelector(".menuScrollBox").classList.remove("active"),isMobile&&jQuery(".menuScrollBox").stop().animate({scrollTop:0},0,"swing",function(){});const o=e.next.container.dataset.position;hideMainMenu(menuPosition=o),t.forEach(function(e,t){e.getAttribute("data-position")==o&&jQuery(e).offset()}),gsap.to("#viewport",{opacity:1,stagger:.3,ease:Power1.easeInOut,duration:.1})},leave(e){},enter(e){headerHeight=header.offsetHeight;var t=-jQuery(".projectWrapper[data-position='"+menuPosition+"']").last().offset().top+headerHeight;gsap.to(".projectSection",{ease:Power1.easeInOut,stagger:.04,duration:.8,y:t,opacity:1});const o=document.querySelectorAll(".projectSection .projectWrapper .title");o.forEach(e=>{gsap.to(e,{ease:Power1.easeIn,stagger:.04,duration:.2,yPercent:0})}),r(),n()}}]}),getScroll(),checkMobile(),MarqueeMenuObserver(),function(){const e=document.querySelector(".headerWrapper .logo");e.addEventListener("mouseenter",e=>{})}(),layoutParallax(),cleanLinks(),document.querySelector('[data-barba-namespace="post"]')){console.log("safd");const i=Plyr.setup(".player",{fullscreen:{enabled:!1}});for(const s in i)i[s].play();r(),n(),hypen(),document.querySelector("#viewport").classList.add("p-events"),setTimeout(function(){gsap.to("#viewport",{opacity:1,stagger:.3,ease:Power1.easeInOut,duration:.1})},1e3)}else document.querySelector("#viewport").classList.remove("p-events")});